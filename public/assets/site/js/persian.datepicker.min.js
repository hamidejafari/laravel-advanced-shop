!function webpackUniversalModuleDefinition(root,factory){"object"==typeof exports&&"object"==typeof module?module.exports=factory():"function"==typeof define&&define.amd?define([],factory):"object"==typeof exports?exports.persianDatepicker=factory():root.persianDatepicker=factory()}(this,(function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.i=function(value){return value},__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=5)}([function(module,exports,__webpack_require__){"use strict";var Helper={debounce:function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,later=function later(){timeout=null,immediate||func.apply(context,args)},callNow=immediate&&!timeout;clearTimeout(timeout),timeout=setTimeout(later,wait),callNow&&func.apply(context,args)}},log:function log(input){console.log(input)},isMobile:(check=!1,a=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(check=!0),check),debug:function debug(elem,input){window.persianDatepickerDebug&&(elem.constructor.name?console.log("Debug: "+elem.constructor.name+" : "+input):console.log("Debug: "+input))},delay:function delay(callback,ms){clearTimeout(window.datepickerTimer),window.datepickerTimer=setTimeout(callback,ms)}},check,a;module.exports=Helper},function(module,exports,__webpack_require__){"use strict";var Template='\n<div id="plotId" class="datepicker-plot-area {{cssClass}}">\n    {{#navigator.enabled}}\n        <div data-navigator class="datepicker-navigator">\n            <div class="pwt-btn pwt-btn-next">{{navigator.text.btnNextText}}</div>\n            <div class="pwt-btn pwt-btn-switch btn btn-one rounded-3 p-0" >{{navigator.switch.text}}</div>\n            <div class="pwt-btn pwt-btn-prev">{{navigator.text.btnPrevText}}</div>\n        </div>\n    {{/navigator.enabled}}\n    <div class="datepicker-grid-view" >\n    {{#days.enabled}}\n        {{#days.viewMode}}\n        <div class="datepicker-day-view" >    \n            <div class="month-grid-box">\n                <div class="header">\n                    <div class="title"></div>\n                    <div class="header-row">\n                        {{#weekdays.list}}\n                            <div class="header-row-cell">{{.}}</div>\n                        {{/weekdays.list}}\n                    </div>\n                </div>    \n                <table cellspacing="0" class="table-days">\n                    <tbody>\n                        {{#days.list}}\n                           \n                            <tr>\n                                {{#.}}\n                                    {{#enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" >\n                                            <span  class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    {{^enabled}}\n                                        <td data-date="{{dataDate}}" data-unix="{{dataUnix}}" class="disabled">\n                                            <span class="{{#otherMonth}}other-month{{/otherMonth}}">{{title}}</span>\n                                            {{#altCalendarShowHint}}\n                                            <i  class="alter-calendar-day">{{alterCalTitle}}</i>\n                                            {{/altCalendarShowHint}}\n                                        </td>\n                                    {{/enabled}}\n                                    \n                                {{/.}}\n                            </tr>\n                        {{/days.list}}\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        {{/days.viewMode}}\n    {{/days.enabled}}\n    \n    {{#month.enabled}}\n        {{#month.viewMode}}\n            <div class="datepicker-month-view">\n                {{#month.list}}\n                    {{#enabled}}               \n                        <div data-year="{{year}}" data-month="{{dataMonth}}" class="month-item {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                    {{^enabled}}               \n                        <div data-year="{{year}}"data-month="{{dataMonth}}" class="month-item month-item-disable {{#selected}}selected{{/selected}}">{{title}}</small></div>\n                    {{/enabled}}\n                {{/month.list}}\n            </div>\n        {{/month.viewMode}}\n    {{/month.enabled}}\n    \n    {{#year.enabled }}\n        {{#year.viewMode }}\n            <div class="datepicker-year-view" >\n                {{#year.list}}\n                    {{#enabled}}\n                        <div data-year="{{dataYear}}" class="year-item {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}\n                    {{^enabled}}\n                        <div data-year="{{dataYear}}" class="year-item year-item-disable {{#selected}}selected{{/selected}}">{{title}}</div>\n                    {{/enabled}}                    \n                {{/year.list}}\n            </div>\n        {{/year.viewMode }}\n    {{/year.enabled }}\n    \n    </div>\n    {{#time}}\n    {{#enabled}}\n    <div class="datepicker-time-view">\n        {{#hour.enabled}}\n            <div class="hour time-segment" data-time-key="hour">\n                <div class="up-btn" data-time-key="hour">▲</div>\n                <input disabled value="{{hour.title}}" type="text" placeholder="hour" class="hour-input">\n                <div class="down-btn" data-time-key="hour">▼</div>                    \n            </div>       \n            <div class="divider">\n                <span>:</span>\n            </div>\n        {{/hour.enabled}}\n        {{#minute.enabled}}\n            <div class="minute time-segment" data-time-key="minute" >\n                <div class="up-btn" data-time-key="minute">▲</div>\n                <input disabled value="{{minute.title}}" type="text" placeholder="minute" class="minute-input">\n                <div class="down-btn" data-time-key="minute">▼</div>\n            </div>        \n            <div class="divider second-divider">\n                <span>:</span>\n            </div>\n        {{/minute.enabled}}\n        {{#second.enabled}}\n            <div class="second time-segment" data-time-key="second"  >\n                <div class="up-btn" data-time-key="second" >▲</div>\n                <input disabled value="{{second.title}}"  type="text" placeholder="second" class="second-input">\n                <div class="down-btn" data-time-key="second" >▼</div>\n            </div>\n            <div class="divider meridian-divider"></div>\n            <div class="divider meridian-divider"></div>\n        {{/second.enabled}}\n        {{#meridian.enabled}}\n            <div class="meridian time-segment" data-time-key="meridian" >\n                <div class="up-btn" data-time-key="meridian">▲</div>\n                <input disabled value="{{meridian.title}}" type="text" class="meridian-input">\n                <div class="down-btn" data-time-key="meridian">▼</div>\n            </div>\n        {{/meridian.enabled}}\n    </div>\n    {{/enabled}}\n    {{/time}}\n    \n    {{#toolbox}}\n    {{#enabled}}\n    <div class="toolbox">\n        {{#toolbox.submitButton.enabled}}\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        {{/toolbox.submitButton.enabled}}        \n        {{#toolbox.todayButton.enabled}}\n            <div class="pwt-btn-today">{{todayButtonText}}</div>\n        {{/toolbox.todayButton.enabled}}        \n        {{#toolbox.calendarSwitch.enabled}}\n            <div class="pwt-btn-calendar">{{calendarSwitchText}}</div>\n        {{/toolbox.calendarSwitch.enabled}}\n    </div>\n    {{/enabled}}\n    {{^enabled}}\n        {{#onlyTimePicker}}\n        <div class="toolbox">\n            <div class="pwt-btn-submit">{{submitButtonText}}</div>\n        </div>\n        {{/onlyTimePicker}}\n    {{/enabled}}\n    {{/toolbox}}\n</div>\n';module.exports=Template},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var State=__webpack_require__(11),Toolbox=__webpack_require__(12),View=__webpack_require__(13),Input=__webpack_require__(6),API=__webpack_require__(3),Navigator=__webpack_require__(7),Options=__webpack_require__(8),PersianDateWrapper=__webpack_require__(10),Model=function(){function Model(inputElement,options){return _classCallCheck(this,Model),this.components(inputElement,options)}return _createClass(Model,[{key:"components",value:function components(inputElement,options){return this.initialUnix=null,this.inputElement=inputElement,this.options=new Options(options,this),this.PersianDate=new PersianDateWrapper(this),this.state=new State(this),this.api=new API(this),this.input=new Input(this,inputElement),this.view=new View(this),this.toolbox=new Toolbox(this),this.updateInput=function(unix){this.input.update(unix)},this.state.setViewDateTime("unix",this.input.getOnInitState()),this.state.setSelectedDateTime("unix",this.input.getOnInitState()),this.view.render(),this.navigator=new Navigator(this),this.api}}]),Model}();module.exports=Model},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var API=function(){function API(model){_classCallCheck(this,API),this.model=model}return _createClass(API,[{key:"show",value:function show(){return this.model.view.show(),this.model.options.onShow(this.model),this.model}},{key:"getState",value:function getState(){return this.model.state}},{key:"hide",value:function hide(){return this.model.view.hide(),this.model.options.onHide(this.model),this.model}},{key:"toggle",value:function toggle(){return this.model.view.toggle(),this.model.options.onToggle(this.model),this.model}},{key:"destroy",value:function destroy(){this.model&&(this.model.view.destroy(),this.model.options.onDestroy(this.model),delete this.model)}},{key:"setDate",value:function setDate(unix){return this.model.state.setSelectedDateTime("unix",unix),this.model.state.setViewDateTime("unix",unix),this.model.state.setSelectedDateTime("unix",unix),this.model.view.render(this.view),this.model.options.onSet(unix),this.model}},{key:"options",get:function get(){return this.model.options},set:function set(inputOptions){var opt=$.extend(!0,this.model.options,inputOptions);this.model.view.destroy(),this.model.components(this.model.inputElement,opt)}}]),API}();module.exports=API},function(module,exports,__webpack_require__){"use strict";var Helper=__webpack_require__(0),Config={calendarType:"persian",calendar:{persian:{locale:"fa",showHint:!1,leapYearMode:"algorithmic"},gregorian:{locale:"en",showHint:!1}},responsive:!0,inline:!1,initialValue:!0,initialValueType:"gregorian",persianDigit:!0,viewMode:"day",format:"LLLL",formatter:function formatter(unixDate){var self=this,pdate;return this.model.PersianDate.date(unixDate).format(this.format)},altField:!1,altFormat:"unix",altFieldFormatter:function altFieldFormatter(unixDate){var self=this,thisAltFormat=this.altFormat.toLowerCase(),pd=void 0;return"gregorian"===thisAltFormat||"g"===thisAltFormat?new Date(unixDate):"unix"===thisAltFormat||"u"===thisAltFormat?unixDate:(pd=this.model.PersianDate.date(unixDate)).format(this.altFormat)},minDate:null,maxDate:null,navigator:{enabled:!0,scroll:{enabled:!0},text:{btnNextText:"<",btnPrevText:">"},onNext:function onNext(datepickerObject){Helper.debug(datepickerObject,"Event: onNext")},onPrev:function onPrev(datepickerObject){Helper.debug(datepickerObject,"Event: onPrev")},onSwitch:function onSwitch(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSwitch")}},toolbox:{enabled:!0,text:{btnToday:"امروز"},submitButton:{enabled:Helper.isMobile,text:{fa:"تایید",en:"submit"},onSubmit:function onSubmit(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSubmit")}},todayButton:{enabled:!0,text:{fa:"امروز",en:"today"},onToday:function onToday(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onToday")}},calendarSwitch:{enabled:!0,format:"MMMM",onSwitch:function onSwitch(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onSwitch")}},onToday:function onToday(datepickerObject){Helper.debug(datepickerObject,"dayPicker Event: onToday")}},onlyTimePicker:!1,onlySelectOnDate:!0,checkDate:function checkDate(){return!0},checkMonth:function checkMonth(){return!0},checkYear:function checkYear(){return!0},timePicker:{enabled:!1,step:1,hour:{enabled:!0,step:null},minute:{enabled:!0,step:null},second:{enabled:!0,step:null},meridian:{enabled:!1}},dayPicker:{enabled:!0,titleFormat:"YYYY MMMM",titleFormatter:function titleFormatter(year,month){var titleDate;return this.model.PersianDate.date([year,month]).format(this.model.options.dayPicker.titleFormat)},onSelect:function onSelect(selectedDayUnix){Helper.debug(this,"dayPicker Event: onSelect : "+selectedDayUnix)}},monthPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function titleFormatter(unix){var titleDate;return this.model.PersianDate.date(unix).format(this.model.options.monthPicker.titleFormat)},onSelect:function onSelect(monthIndex){Helper.debug(this,"monthPicker Event: onSelect : "+monthIndex)}},yearPicker:{enabled:!0,titleFormat:"YYYY",titleFormatter:function titleFormatter(year){var remaining=12*parseInt(year/12,10),startYear=this.model.PersianDate.date([remaining]),endYear=this.model.PersianDate.date([remaining+11]);return startYear.format(this.model.options.yearPicker.titleFormat)+"-"+endYear.format(this.model.options.yearPicker.titleFormat)},onSelect:function onSelect(year){Helper.debug(this,"yearPicker Event: onSelect : "+year)}},onSelect:function onSelect(unixDate){Helper.debug(this,"datepicker Event: onSelect : "+unixDate)},onSet:function onSet(unixDate){Helper.debug(this,"datepicker Event: onSet : "+unixDate)},position:"auto",onShow:function onShow(datepickerObject){Helper.debug(datepickerObject,"Event: onShow ")},onHide:function onHide(datepickerObject){Helper.debug(datepickerObject,"Event: onHide ")},onToggle:function onToggle(datepickerObject){Helper.debug(datepickerObject,"Event: onToggle ")},onDestroy:function onDestroy(datepickerObject){Helper.debug(datepickerObject,"Event: onDestroy ")},autoClose:!1,template:null,observer:!1,inputDelay:800};module.exports=Config},function(module,exports,__webpack_require__){"use strict";var Model=__webpack_require__(2);!function($){$.fn.persianDatepicker=$.fn.pDatepicker=function(options){var args=Array.prototype.slice.call(arguments),output=null,self=this;return this||$.error("Invalid selector"),$(this).each((function(){var emptyArr=[],tempArg=args.concat(emptyArr),dp=$(this).data("datepicker"),funcName=null;dp&&"string"==typeof tempArg[0]?(funcName=tempArg[0],output=dp[funcName](tempArg[0])):self.pDatePicker=new Model(this,options)})),$(this).data("datepicker",self.pDatePicker),self.pDatePicker}}(jQuery)},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Helper=__webpack_require__(0),PersianDateParser=__webpack_require__(9),Input=function(){function Input(model,inputElement){return _classCallCheck(this,Input),this.model=model,this._firstUpdate=!0,this.elem=inputElement,this.model.options.observer&&this.observe(),this.addInitialClass(),this.initialUnix=null,0==this.model.options.inline&&this._attachInputElementEvents(),this}return _createClass(Input,[{key:"addInitialClass",value:function addInitialClass(){$(this.elem).addClass("pwt-datepicker-input-element")}},{key:"parseInput",value:function parseInput(inputString){var parse=new PersianDateParser,that=this;if(void 0!==parse.parse(inputString)){var pd=this.model.PersianDate.date(parse.parse(inputString)).valueOf();this.model.state.setSelectedDateTime("unix",pd),this.model.state.setViewDateTime("unix",pd),this.model.view.render()}}},{key:"observe",value:function observe(){var that=this;$(that.elem).bind("paste",(function(e){Helper.delay((function(){that.parseInput(e.target.value)}),60)}));var typingTimer=void 0,doneTypingInterval=that.model.options.inputDelay,ctrlDown=!1,ctrlKey=[17,91],vKey=86;function doneTyping($self){that.parseInput($self.val())}$(document).keydown((function(e){$.inArray(e.keyCode,ctrlKey)>0&&(ctrlDown=!0)})).keyup((function(e){$.inArray(e.keyCode,ctrlKey)>0&&(ctrlDown=!1)})),$(that.elem).bind("keyup",(function(e){var $self=$(this),trueKey=!1;(8===e.keyCode||e.keyCode<105&&e.keyCode>96||e.keyCode<58&&e.keyCode>47||ctrlDown&&(86==e.keyCode||$.inArray(e.keyCode,ctrlKey)>0))&&(trueKey=!0),trueKey&&(clearTimeout(typingTimer),typingTimer=setTimeout((function(){doneTyping($self)}),doneTypingInterval))})),$(that.elem).on("keydown",(function(){clearTimeout(typingTimer)}))}},{key:"_attachInputElementEvents",value:function _attachInputElementEvents(){var that=this,closePickerHandler=function closePickerHandler(e){$(e.target).is(that.elem)||$(e.target).is(that.model.view.$container)||0!=$(e.target).closest("#"+that.model.view.$container.attr("id")).length||$(e.target).is($(that.elem).children())||(that.model.api.hide(),$("body").unbind("click",closePickerHandler))};$(this.elem).on("focus click",Helper.debounce((function(evt){return that.model.api.show(),!1===that.model.state.ui.isInline&&$("body").unbind("click",closePickerHandler).bind("click",closePickerHandler),Helper.isMobile&&$(this).blur(),evt.stopPropagation(),!1}),200)),$(this.elem).on("keydown",Helper.debounce((function(evt){if(9===evt.which)return that.model.api.hide(),!1}),200))}},{key:"getInputPosition",value:function getInputPosition(){return $(this.elem).offset()}},{key:"getInputSize",value:function getInputSize(){return{width:$(this.elem).outerWidth(),height:$(this.elem).outerHeight()}}},{key:"_updateAltField",value:function _updateAltField(unix){var value=this.model.options.altFieldFormatter(unix);$(this.model.options.altField).val(value)}},{key:"_updateInputField",value:function _updateInputField(unix){var value=this.model.options.formatter(unix);$(this.elem).val()!=value&&$(this.elem).val(value)}},{key:"update",value:function update(unix){0==this.model.options.initialValue&&this._firstUpdate?this._firstUpdate=!1:(this._updateInputField(unix),this._updateAltField(unix))}},{key:"getOnInitState",value:function getOnInitState(){var persianDatePickerTimeRegex="^([0-1][0-9]|2[0-3]):([0-5][0-9])(?::([0-5][0-9]))?$",garegurianDate=null,$inputElem=$(this.elem),inputValue=void 0;if((inputValue="INPUT"===$inputElem[0].nodeName?$inputElem[0].getAttribute("value"):$inputElem.data("date"))&&inputValue.match(persianDatePickerTimeRegex)){var timeArray=inputValue.split(":"),tempDate=new Date;tempDate.setHours(timeArray[0]),tempDate.setMinutes(timeArray[1]),timeArray[2]?tempDate.setSeconds(timeArray[2]):tempDate.setSeconds(0),this.initialUnix=tempDate.valueOf()}else{if("persian"===this.model.options.initialValueType&&inputValue){var parse=new PersianDateParser,pd=new persianDate(parse.parse(inputValue)).valueOf();garegurianDate=new Date(pd).valueOf()}else"unix"===this.model.options.initialValueType&&inputValue?garegurianDate=parseInt(inputValue):inputValue&&(garegurianDate=new Date(inputValue).valueOf());this.initialUnix=garegurianDate&&"undefined"!=garegurianDate?garegurianDate:(new Date).valueOf()}return this.initialUnix}}]),Input}();module.exports=Input},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Hamster=__webpack_require__(14),Navigator=function(){function Navigator(model){return _classCallCheck(this,Navigator),this.model=model,this.liveAttach(),this._attachEvents(),this}return _createClass(Navigator,[{key:"liveAttach",value:function liveAttach(){if(this.model.options.navigator.scroll.enabled){var that=this,gridPlot=$("#"+that.model.view.id+" .datepicker-grid-view")[0];Hamster(gridPlot).wheel((function(event,delta){delta>0?that.model.state.navigate("next"):that.model.state.navigate("prev"),that.model.view.render(),event.preventDefault()})),this.model.options.timePicker.enabled&&$("#"+that.model.view.id+" .time-segment").each((function(){Hamster(this).wheel((function(event,delta){var $target=$(event.target),key=$target.data("time-key")?$target.data("time-key"):$target.parents("[data-time-key]").data("time-key");key&&(delta>0?that.timeUp(key):that.timeDown(key)),that.model.view.render(),event.preventDefault()}))}))}}},{key:"timeUp",value:function timeUp(timekey){if(null!=this.model.options.timePicker[timekey]){var step=void 0,t=void 0,that=this;"meridian"==timekey?(step=12,t="PM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",step).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",step).valueOf(),this.model.state.meridianToggle()):(step=this.model.options.timePicker[timekey].step,t=this.model.PersianDate.date(this.model.state.selected.unixDate).add(timekey,step).valueOf()),this.model.state.setViewDateTime("unix",t),this.model.state.setSelectedDateTime("unix",t),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeUp=setTimeout((function(){that.model.view.markSelectedDay()}),300)}}},{key:"timeDown",value:function timeDown(timekey){if(null!=this.model.options.timePicker[timekey]){var step=void 0,t=void 0,that=this;"meridian"==timekey?(step=12,t="AM"==this.model.state.view.meridian?this.model.PersianDate.date(this.model.state.selected.unixDate).add("hour",step).valueOf():this.model.PersianDate.date(this.model.state.selected.unixDate).subtract("hour",step).valueOf(),this.model.state.meridianToggle()):(step=this.model.options.timePicker[timekey].step,t=this.model.PersianDate.date(this.model.state.selected.unixDate).subtract(timekey,step).valueOf()),this.model.state.setViewDateTime("unix",t),this.model.state.setSelectedDateTime("unix",t),this.model.view.renderTimePartial(),clearTimeout(this.scrollDelayTimeDown),this.scrollDelayTimeDown=setTimeout((function(){that.model.view.markSelectedDay()}),300)}}},{key:"_attachEvents",value:function _attachEvents(){var that=this;this.model.options.navigator.enabled&&$(document).on("click","#"+that.model.view.id+" .pwt-btn",(function(){$(this).is(".pwt-btn-next")?(that.model.state.navigate("next"),that.model.view.render(),that.model.options.navigator.onNext(that.model)):$(this).is(".pwt-btn-switch")?(that.model.state.switchViewMode(),that.model.view.render(),that.model.options.navigator.onSwitch(that.model)):$(this).is(".pwt-btn-prev")&&(that.model.state.navigate("prev"),that.model.view.render(),that.model.options.navigator.onPrev(that.model))})),this.model.options.timePicker.enabled&&($(document).on("click","#"+that.model.view.id+" .up-btn",(function(){var timekey=$(this).data("time-key");that.timeUp(timekey),that.model.options.onSelect(that.model.state.selected.unixDate)})),$(document).on("click","#"+that.model.view.id+" .down-btn",(function(){var timekey=$(this).data("time-key");that.timeDown(timekey),that.model.options.onSelect(that.model.state.selected.unixDate)}))),this.model.options.dayPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-day-view td:not(.disabled)",(function(){var thisUnix=$(this).data("unix"),mustRender=void 0;that.model.state.setSelectedDateTime("unix",thisUnix),mustRender=that.model.state.selected.month!==that.model.state.view.month,that.model.state.setViewDateTime("unix",that.model.state.selected.unixDate),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that)),mustRender?that.model.view.render():that.model.view.markSelectedDay(),that.model.options.dayPicker.onSelect(thisUnix),that.model.options.onSelect(thisUnix)})),this.model.options.monthPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-month-view .month-item:not(.month-item-disable)",(function(){var month=$(this).data("month"),year=$(this).data("year");that.model.state.switchViewModeTo("day"),that.model.options.onlySelectOnDate||(that.model.state.setSelectedDateTime("year",year),that.model.state.setSelectedDateTime("month",month),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that))),that.model.state.setViewDateTime("month",month),that.model.view.render(),that.model.options.monthPicker.onSelect(month),that.model.options.onSelect(that.model.state.selected.unixDate)})),this.model.options.yearPicker.enabled&&$(document).on("click","#"+that.model.view.id+" .datepicker-year-view .year-item:not(.year-item-disable)",(function(){var year=$(this).data("year");that.model.state.switchViewModeTo("month"),that.model.options.onlySelectOnDate||(that.model.state.setSelectedDateTime("year",year),that.model.options.autoClose&&(that.model.view.hide(),that.model.options.onHide(that))),that.model.state.setViewDateTime("year",year),that.model.view.render(),that.model.options.yearPicker.onSelect(year),that.model.options.onSelect(that.model.state.selected.unixDate)}))}}]),Navigator}();module.exports=Navigator},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Config=__webpack_require__(4),Template=__webpack_require__(1),Options=function(){function Options(options,model){return _classCallCheck(this,Options),this.model=model,this._compatibility($.extend(!0,this,Config,options))}return _createClass(Options,[{key:"_compatibility",value:function _compatibility(options){options.inline&&(options.toolbox.submitButton.enabled=!1),options.template||(options.template=Template),persianDate.toCalendar(options.calendarType),persianDate.toLocale(options.calendar[options.calendarType].locale),options.onlyTimePicker&&(options.dayPicker.enabled=!1,options.monthPicker.enabled=!1,options.yearPicker.enabled=!1,options.navigator.enabled=!1,options.toolbox.enabled=!1,options.timePicker.enabled=!0),null===options.timePicker.hour.step&&(options.timePicker.hour.step=options.timePicker.step),null===options.timePicker.minute.step&&(options.timePicker.minute.step=options.timePicker.step),null===options.timePicker.second.step&&(options.timePicker.second.step=options.timePicker.step),!1===options.dayPicker.enabled&&(options.onlySelectOnDate=!1),options._viewModeList=[],options.dayPicker.enabled&&options._viewModeList.push("day"),options.monthPicker.enabled&&options._viewModeList.push("month"),options.yearPicker.enabled&&options._viewModeList.push("year")}}]),Options}();module.exports=Options},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var PersianDateParser=function(){function PersianDateParser(){_classCallCheck(this,PersianDateParser),this.pattern={iso:/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(\\.[0-9]+)?(Z)?$/g,jalali:/^[1-4]\d{3}(\/|-|\.)((0?[1-6](\/|-|\.)((3[0-1])|([1-2][0-9])|(0?[1-9])))|((1[0-2]|(0?[7-9]))(\/|-|\.)(30|([1-2][0-9])|(0?[1-9]))))$/g}}return _createClass(PersianDateParser,[{key:"parse",value:function parse(inputString){var that=this,persianDateArray=void 0,isoPat=new RegExp(this.pattern.iso),jalaliPat=new RegExp(this.pattern.jalali);return String.prototype.toEnglishDigits=function(){var charCodeZero="۰".charCodeAt(0);return this.replace(/[۰-۹]/g,(function(w){return w.charCodeAt(0)-charCodeZero}))},inputString=inputString.toEnglishDigits(),jalaliPat.test(inputString)?persianDateArray=inputString.split(/\/|-|\,|\./).map(Number):isoPat.test(inputString)?persianDateArray=inputString.split(/\/|-|\,|\:|\T|\Z/g).map(Number):void 0}}]),PersianDateParser}();module.exports=PersianDateParser},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var PersianDateWrapper=function(){function PersianDateWrapper(model){return _classCallCheck(this,PersianDateWrapper),this.model=model,this.model.options.calendar_=this.model.options.calendarType,this.model.options.locale_=this.model.options.calendar[this.model.options.calendarType].locale,this}return _createClass(PersianDateWrapper,[{key:"date",value:function date(input){window.inspdCount||0===window.inspdCount?window.inspdCount++:window.inspdCount=0;var that=this,output=void 0,cp=void 0;return cp=persianDate.toCalendar(this.model.options.calendar_),this.model.options.calendar[this.model.options.calendarType].leapYearMode&&cp.toLeapYearMode(this.model.options.calendar[this.model.options.calendarType].leapYearMode),(output=new cp(input)).toLocale(this.model.options.locale_)}}]),PersianDateWrapper}();module.exports=PersianDateWrapper},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var State=function(){function State(model){return _classCallCheck(this,State),this.model=model,this.filetredDate=this.model.options.minDate||this.model.options.maxDate,this.viewModeList=this.model.options._viewModeList,this.viewMode=this.viewModeList.indexOf(model.options.viewMode)>0?model.options.viewMode:this.viewModeList[0],this.viewModeIndex=this.viewModeList.indexOf(model.options.viewMode)>0?this.viewModeList.indexOf(model.options.viewMode):0,this.filterDate={start:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0},end:{year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0}},this.view={year:0,month:0,date:0,hour:0,minute:0,second:0,unixDate:0,dateObject:null,meridian:"AM"},this.selected={year:0,month:0,date:0,hour:0,hour12:0,minute:0,second:0,unixDate:0,dateObject:null},this.ui={isOpen:!1,isInline:this.model.options.inline},this._setFilterDate(this.model.options.minDate,this.model.options.maxDate),this}return _createClass(State,[{key:"_setFilterDate",value:function _setFilterDate(minDate,maxDate){var self=this;minDate||(minDate=-2e15),maxDate||(maxDate=2e15);var pd=this.model.PersianDate.date(minDate);this.filterDate.start.unixDate=minDate,this.filterDate.start.hour=pd.hour(),this.filterDate.start.minute=pd.minute(),this.filterDate.start.second=pd.second(),this.filterDate.start.month=pd.month(),this.filterDate.start.date=pd.date(),this.filterDate.start.year=pd.year();var pdEnd=this.model.PersianDate.date(maxDate);this.filterDate.end.unixDate=maxDate,this.filterDate.end.hour=pdEnd.hour(),this.filterDate.end.minute=pdEnd.minute(),this.filterDate.end.second=pdEnd.second(),this.filterDate.end.month=pdEnd.month(),this.filterDate.end.date=pdEnd.date(),this.filterDate.end.year=pdEnd.year()}},{key:"navigate",value:function navigate(nav){if("next"==nav){if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year+12),"month"==this.viewMode){var newYear=this.view.year+1;0===newYear&&(newYear=1),this.setViewDateTime("year",newYear)}if("day"==this.viewMode){var _newYear=this.view.year+1;0===_newYear&&(_newYear=1),this.view.month+1==13?(this.setViewDateTime("year",_newYear),this.setViewDateTime("month",1)):this.setViewDateTime("month",this.view.month+1)}}else{if("year"==this.viewMode&&this.setViewDateTime("year",this.view.year-12),"month"==this.viewMode){var _newYear2=this.view.year-1;0===_newYear2&&(_newYear2=-1),this.setViewDateTime("year",_newYear2)}if("day"==this.viewMode)if(this.view.month-1<=0){var _newYear3=this.view.year-1;0===_newYear3&&(_newYear3=-1),this.setViewDateTime("year",_newYear3),this.setViewDateTime("month",12)}else this.setViewDateTime("month",this.view.month-1)}}},{key:"switchViewMode",value:function switchViewMode(){return this.viewModeIndex=this.viewModeIndex+1>=this.viewModeList.length?0:this.viewModeIndex+1,this.viewMode=this.viewModeList[this.viewModeIndex]?this.viewModeList[this.viewModeIndex]:this.viewModeList[0],this._setViewDateTimeUnix(),this}},{key:"switchViewModeTo",value:function switchViewModeTo(viewMode){this.viewModeList.indexOf(viewMode)>=0&&(this.viewMode=viewMode,this.viewModeIndex=this.viewModeList.indexOf(viewMode))}},{key:"setSelectedDateTime",value:function setSelectedDateTime(key,value){var that=this;switch(key){case"unix":this.selected.unixDate=value;var pd=this.model.PersianDate.date(value);this.selected.year=pd.year(),this.selected.month=pd.month(),this.selected.date=pd.date(),this.selected.hour=pd.hour(),this.selected.hour12=pd.format("hh"),this.selected.minute=pd.minute(),this.selected.second=pd.second();break;case"year":this.selected.year=value;break;case"month":this.selected.month=value;break;case"date":this.selected.date=value;break;case"hour":this.selected.hour=value;break;case"minute":this.selected.minute=value;break;case"second":this.selected.second=value}return this._updateSelectedUnix(),this}},{key:"_updateSelectedUnix",value:function _updateSelectedUnix(){return this.selected.dateObject=this.model.PersianDate.date([this.selected.year,this.selected.month,this.selected.date,this.view.hour,this.view.minute,this.view.second]),this.selected.unixDate=this.selected.dateObject.valueOf(),this.model.updateInput(this.selected.unixDate),this}},{key:"_setViewDateTimeUnix",value:function _setViewDateTimeUnix(){var daysInMonth=(new persianDate).daysInMonth(this.view.year,this.view.month);return this.view.date>daysInMonth&&(this.view.date=daysInMonth),this.view.dateObject=this.model.PersianDate.date([this.view.year,this.view.month,this.view.date,this.view.hour,this.view.minute,this.view.second]),this.view.year=this.view.dateObject.year(),this.view.month=this.view.dateObject.month(),this.view.date=this.view.dateObject.date(),this.view.hour=this.view.dateObject.hour(),this.view.hour12=this.view.dateObject.format("hh"),this.view.minute=this.view.dateObject.minute(),this.view.second=this.view.dateObject.second(),this.view.unixDate=this.view.dateObject.valueOf(),this}},{key:"setViewDateTime",value:function setViewDateTime(key,value){var self=this;switch(key){case"unix":var pd=this.model.PersianDate.date(value);this.view.year=pd.year(),this.view.month=pd.month(),this.view.date=pd.date(),this.view.hour=pd.hour(),this.view.minute=pd.minute(),this.view.second=pd.second();break;case"year":this.view.year=value;break;case"month":this.view.month=value;break;case"date":this.view.date=value;break;case"hour":this.view.hour=value;break;case"minute":this.view.minute=value;break;case"second":this.view.second=value}return this._setViewDateTimeUnix(),this}},{key:"meridianToggle",value:function meridianToggle(){var self=this;"AM"===this.view.meridian?this.view.meridian="PM":"PM"===this.view.meridian&&(this.view.meridian="AM")}}]),State}();module.exports=State},function(module,exports,__webpack_require__){"use strict";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Toolbox=function(){function Toolbox(model){return _classCallCheck(this,Toolbox),this.model=model,this._attachEvents(),this}return _createClass(Toolbox,[{key:"_toggleCalendartype",value:function _toggleCalendartype(){var that=this;"persian"==this.model.options.calendar_?(this.model.options.calendar_="gregorian",this.model.options.locale_=this.model.options.calendar.gregorian.locale):(this.model.options.calendar_="persian",this.model.options.locale_=this.model.options.calendar.persian.locale)}},{key:"_attachEvents",value:function _attachEvents(){var that=this;$(document).on("click","#"+that.model.view.id+" .pwt-btn-today",(function(){that.model.state.setSelectedDateTime("unix",(new Date).valueOf()),that.model.state.setViewDateTime("unix",(new Date).valueOf()),that.model.view.reRender(),that.model.options.toolbox.onToday(that.model),that.model.options.toolbox.todayButton.onToday(that.model)})),$(document).on("click","#"+that.model.view.id+" .pwt-btn-calendar",(function(){that._toggleCalendartype(),that.model.state.setSelectedDateTime("unix",that.model.state.selected.unixDate),that.model.state.setViewDateTime("unix",that.model.state.view.unixDate),that.model.view.render(),that.model.options.toolbox.calendarSwitch.onSwitch(that.model)})),$(document).on("click","#"+that.model.view.id+" .pwt-btn-submit",(function(){that.model.view.hide(),that.model.options.toolbox.submitButton.onSubmit(that.model),that.model.options.onHide(this)}))}}]),Toolbox}();module.exports=Toolbox},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return sliceIterator(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}var Template=__webpack_require__(1),Helper=__webpack_require__(0),Mustache=__webpack_require__(15),View=function(){function View(model){_classCallCheck(this,View),this.yearsViewCount=12,this.model=model,this.rendered=null,this.$container=null,this.id="persianDateInstance-"+parseInt(1e3*Math.random(100));var that=this;return this.model.state.ui.isInline?this.$container=$('<div  id="'+this.id+'" class="datepicker-container-inline"></div>').appendTo(this.model.inputElement):(this.$container=$('<div  id="'+this.id+'" class="datepicker-container"></div>').appendTo("body"),this.hide(),this.setPickerBoxPosition(),this.addCompatibilityClass()),this}return _createClass(View,[{key:"addCompatibilityClass",value:function addCompatibilityClass(){Helper.isMobile&&this.model.options.responsive&&this.$container.addClass("pwt-mobile-view")}},{key:"destroy",value:function destroy(){this.$container.remove()}},{key:"setPickerBoxPosition",value:function setPickerBoxPosition(){var inputPosition=this.model.input.getInputPosition(),inputSize=this.model.input.getInputSize();if(Helper.isMobile&&this.model.options.responsive)return!1;"auto"===this.model.options.position?this.$container.css({left:inputPosition.left+"px",top:inputSize.height+inputPosition.top+"px"}):this.$container.css({left:this.model.options.position[1]+inputPosition.left+"px",top:this.model.options.position[0]+inputPosition.top+"px"})}},{key:"show",value:function show(){this.$container.removeClass("pwt-hide"),this.setPickerBoxPosition()}},{key:"hide",value:function hide(){this.$container.addClass("pwt-hide")}},{key:"toggle",value:function toggle(){this.$container.toggleClass("pwt-hide")}},{key:"_getNavSwitchText",value:function _getNavSwitchText(data){var output=void 0;return"day"==this.model.state.viewMode?output=this.model.options.dayPicker.titleFormatter.call(this,data.year,data.month):"month"==this.model.state.viewMode?output=this.model.options.monthPicker.titleFormatter.call(this,data.dateObject.valueOf()):"year"==this.model.state.viewMode&&(output=this.model.options.yearPicker.titleFormatter.call(this,data.year)),output}},{key:"checkYearAccess",value:function checkYearAccess(year){var output=!0;if(this.model.state.filetredDate){var startYear=this.model.state.filterDate.start.year,endYear=this.model.state.filterDate.end.year;if(startYear&&year<startYear)return!1;if(endYear&&year>endYear)return!1}return this.model.options.checkYear(year)}},{key:"_getYearViewModel",value:function _getYearViewModel(viewState){var _this=this,isEnabled=this.model.options.yearPicker.enabled;if(!isEnabled)return{enabled:!1};var list=[].concat(_toConsumableArray(Array(this.yearsViewCount).keys())).map((function(value){return value+parseInt(viewState.year/_this.yearsViewCount)*_this.yearsViewCount})),yearsModel=[],yearStr=this.model.PersianDate.date(),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=list[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var i=_step.value;yearStr.year([i]),yearsModel.push({title:yearStr.format("YYYY"),enabled:this.checkYearAccess(i),dataYear:i,selected:this.model.state.selected.year==i})}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return{enabled:isEnabled,viewMode:"year"==this.model.state.viewMode,list:yearsModel}}},{key:"checkMonthAccess",value:function checkMonthAccess(month){month+=1;var output=!0,y=this.model.state.view.year;if(this.model.state.filetredDate){var startMonth=this.model.state.filterDate.start.month,endMonth=this.model.state.filterDate.end.month,startYear=this.model.state.filterDate.start.year,endYear=this.model.state.filterDate.end.year;if(startMonth&&endMonth&&(y==endYear&&month>endMonth||y>endYear)||y==startYear&&month<startMonth||y<startYear)return!1;if(endMonth&&(y==endYear&&month>endMonth||y>endYear))return!1;if(startMonth&&(y==startYear&&month<startMonth||y<startYear))return!1}return this.model.options.checkMonth(month,y)}},{key:"_getMonthViewModel",value:function _getMonthViewModel(){var isEnaled=this.model.options.monthPicker.enabled;if(!isEnaled)return{enabled:!1};var monthModel=[],that=this,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=this.model.PersianDate.date().rangeName().months.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=_slicedToArray(_step2.value,2),index=_step2$value[0],month=_step2$value[1];monthModel.push({title:month,enabled:this.checkMonthAccess(index),year:this.model.state.view.year,dataMonth:index+1,selected:this.model.state.selected.year==this.model.state.view.year&&this.model.state.selected.month==index+1})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return{enabled:isEnaled,viewMode:"month"==this.model.state.viewMode,list:monthModel}}},{key:"checkDayAccess",value:function checkDayAccess(unixtimespan){var self=this,output=!0;if(this.minDate=this.model.options.minDate,this.maxDate=this.model.options.maxDate,this.model.state.filetredDate)if(this.minDate&&this.maxDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),!(unixtimespan>=this.minDate&&unixtimespan<=this.maxDate))return!1}else if(this.minDate){if(this.minDate=this.model.PersianDate.date(this.minDate).startOf("day").valueOf(),unixtimespan<=this.minDate)return!1}else if(this.maxDate&&(this.maxDate=this.model.PersianDate.date(this.maxDate).endOf("day").valueOf(),unixtimespan>=this.maxDate))return!1;return this.model.options.checkDate(unixtimespan)}},{key:"_getDayViewModel",value:function _getDayViewModel(){if("day"!=this.model.state.viewMode)return[];var isEnabled=this.model.options.dayPicker.enabled;if(!isEnabled)return{enabled:!1};var viewMonth=this.model.state.view.month,viewYear=this.model.state.view.year,pdateInstance=this.model.PersianDate.date(),daysCount=pdateInstance.daysInMonth(viewYear,viewMonth),firstWeekDayOfMonth=pdateInstance.getFirstWeekDayOfMonth(viewYear,viewMonth)-1,outputList=[],daysListindex=0,nextMonthListIndex=0,daysMatrix=[["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"],["null","null","null","null","null","null","null"]],anotherCalendar=this._getAnotherCalendar(),_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=daysMatrix.entries()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _step3$value=_slicedToArray(_step3.value,2),rowIndex=_step3$value[0],daysRow=_step3$value[1];outputList[rowIndex]=[];var _iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=daysRow.entries()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _step4$value,dayIndex=_slicedToArray(_step4.value,1)[0],calcedDate=void 0,otherMonth=void 0;0===rowIndex&&dayIndex<firstWeekDayOfMonth?(calcedDate=this.model.state.view.dateObject.startOf("month").hour(12).subtract("days",firstWeekDayOfMonth-dayIndex),otherMonth=!0):0===rowIndex&&dayIndex>=firstWeekDayOfMonth||rowIndex<=5&&daysListindex<daysCount?(daysListindex+=1,calcedDate=new persianDate([this.model.state.view.year,this.model.state.view.month,daysListindex]),otherMonth=!1):(nextMonthListIndex+=1,calcedDate=this.model.state.view.dateObject.endOf("month").hour(12).add("days",nextMonthListIndex),otherMonth=!0),outputList[rowIndex].push({title:calcedDate.format("D"),alterCalTitle:new persianDate(calcedDate.valueOf()).toCalendar(anotherCalendar[0]).toLocale(anotherCalendar[1]).format("D"),dataDate:[calcedDate.year(),calcedDate.month(),calcedDate.date()].join(","),dataUnix:calcedDate.hour(12).valueOf(),otherMonth:otherMonth,enabled:this.checkDayAccess(calcedDate.valueOf())})}}catch(err){_didIteratorError4=!0,_iteratorError4=err}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}}catch(err){_didIteratorError3=!0,_iteratorError3=err}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}return{enabled:isEnabled,viewMode:"day"==this.model.state.viewMode,list:outputList}}},{key:"markSelectedDay",value:function markSelectedDay(){var selected=this.model.state.selected;this.$container.find(".table-days td").each((function(){$(this).data("date")==[selected.year,selected.month,selected.date].join(",")?$(this).addClass("selected"):$(this).removeClass("selected")}))}},{key:"markToday",value:function markToday(){var today=new persianDate;this.$container.find(".table-days td").each((function(){$(this).data("date")==[today.year(),today.month(),today.date()].join(",")?$(this).addClass("today"):$(this).removeClass("today")}))}},{key:"_getTimeViewModel",value:function _getTimeViewModel(){var isEnabled=this.model.options.timePicker.enabled;if(!isEnabled)return{enabled:!1};var hourTitle=void 0;return{enabled:isEnabled,hour:{title:hourTitle=this.model.options.timePicker.meridian.enabled?this.model.state.view.dateObject.format("hh"):this.model.state.view.dateObject.format("HH"),enabled:this.model.options.timePicker.hour.enabled},minute:{title:this.model.state.view.dateObject.format("mm"),enabled:this.model.options.timePicker.minute.enabled},second:{title:this.model.state.view.dateObject.format("ss"),enabled:this.model.options.timePicker.second.enabled},meridian:{title:this.model.state.view.dateObject.format("a"),enabled:this.model.options.timePicker.meridian.enabled}}}},{key:"_getWeekViewModel",value:function _getWeekViewModel(){return{enabled:!0,list:this.model.PersianDate.date().rangeName().weekdaysMin}}},{key:"getCssClass",value:function getCssClass(){return[this.model.state.ui.isInline?"datepicker-plot-area-inline-view":"",this.model.options.timePicker.meridian.enabled?"":"datepicker-state-no-meridian",this.model.options.onlyTimePicker?"datepicker-state-only-time":"",this.model.options.timePicker.second.enabled?"":"datepicker-state-no-second","gregorian"==this.model.options.calendar_?"datepicker-gregorian":"datepicker-persian"].join(" ")}},{key:"getViewModel",value:function getViewModel(data){var anotherCalendar=this._getAnotherCalendar();return{plotId:"",navigator:{enabled:this.model.options.navigator.enabled,switch:{enabled:!0,text:this._getNavSwitchText(data)},text:this.model.options.navigator.text},selected:this.model.state.selected,time:this._getTimeViewModel(data),days:this._getDayViewModel(data),weekdays:this._getWeekViewModel(data),month:this._getMonthViewModel(data),year:this._getYearViewModel(data),toolbox:this.model.options.toolbox,cssClass:this.getCssClass(),onlyTimePicker:this.model.options.onlyTimePicker,altCalendarShowHint:this.model.options.calendar[anotherCalendar[0]].showHint,calendarSwitchText:this.model.state.view.dateObject.toCalendar(anotherCalendar[0]).toLocale(anotherCalendar[1]).format(this.model.options.toolbox.calendarSwitch.format),todayButtonText:this._getButtonText().todayButtontext,submitButtonText:this._getButtonText().submitButtonText}}},{key:"_getButtonText",value:function _getButtonText(){var output={};return"fa"==this.model.options.locale_?(output.todayButtontext=this.model.options.toolbox.todayButton.text.fa,output.submitButtonText=this.model.options.toolbox.submitButton.text.fa):"en"==this.model.options.locale_&&(output.todayButtontext=this.model.options.toolbox.todayButton.text.en,output.submitButtonText=this.model.options.toolbox.submitButton.text.en),output}},{key:"_getAnotherCalendar",value:function _getAnotherCalendar(){var that=this,cal=void 0,loc=void 0;return"persian"==this.model.options.calendar_?(cal="gregorian",loc=this.model.options.calendar.gregorian.locale):(cal="persian",loc=this.model.options.calendar.persian.locale),[cal,loc]}},{key:"renderTimePartial",value:function renderTimePartial(){var timeViewModel=this._getTimeViewModel(this.model.state.view);this.$container.find('[data-time-key="hour"] input').val(timeViewModel.hour.title),this.$container.find('[data-time-key="minute"] input').val(timeViewModel.minute.title),this.$container.find('[data-time-key="second"] input').val(timeViewModel.second.title),this.$container.find('[data-time-key="meridian"] input').val(timeViewModel.meridian.title)}},{key:"render",value:function render(data){data||(data=this.model.state.view),Helper.debug(this,"render"),Mustache.parse(Template),this.rendered=$(Mustache.render(this.model.options.template,this.getViewModel(data))),this.$container.empty().append(this.rendered),this.markSelectedDay(),this.markToday(),this.afterRender()}},{key:"reRender",value:function reRender(){var data=this.model.state.view;this.render(data)}},{key:"afterRender",value:function afterRender(){this.model.navigator&&this.model.navigator.liveAttach()}}]),View}();module.exports=View},function(module,exports,__webpack_require__){!function(window,document){"use strict";var Hamster=function(element){return new Hamster.Instance(element)},lowestDelta,lowestDeltaXY;Hamster.SUPPORT="wheel",Hamster.ADD_EVENT="addEventListener",Hamster.REMOVE_EVENT="removeEventListener",Hamster.PREFIX="",Hamster.READY=!1,Hamster.Instance=function(element){return Hamster.READY||(Hamster.normalise.browser(),Hamster.READY=!0),this.element=element,this.handlers=[],this},Hamster.Instance.prototype={wheel:function onEvent(handler,useCapture){return Hamster.event.add(this,Hamster.SUPPORT,handler,useCapture),"DOMMouseScroll"===Hamster.SUPPORT&&Hamster.event.add(this,"MozMousePixelScroll",handler,useCapture),this},unwheel:function offEvent(handler,useCapture){return void 0===handler&&(handler=this.handlers.slice(-1)[0])&&(handler=handler.original),Hamster.event.remove(this,Hamster.SUPPORT,handler,useCapture),"DOMMouseScroll"===Hamster.SUPPORT&&Hamster.event.remove(this,"MozMousePixelScroll",handler,useCapture),this}},Hamster.event={add:function add(hamster,eventName,handler,useCapture){var originalHandler=handler;handler=function(originalEvent){originalEvent||(originalEvent=window.event);var event=Hamster.normalise.event(originalEvent),delta=Hamster.normalise.delta(originalEvent);return originalHandler(event,delta[0],delta[1],delta[2])},hamster.element[Hamster.ADD_EVENT](Hamster.PREFIX+eventName,handler,useCapture||!1),hamster.handlers.push({original:originalHandler,normalised:handler})},remove:function remove(hamster,eventName,handler,useCapture){for(var originalHandler=handler,lookup={},handlers,i=0,len=hamster.handlers.length;i<len;++i)lookup[hamster.handlers[i].original]=hamster.handlers[i];for(var h in handler=(handlers=lookup[originalHandler]).normalised,hamster.element[Hamster.REMOVE_EVENT](Hamster.PREFIX+eventName,handler,useCapture||!1),hamster.handlers)if(hamster.handlers[h]==handlers){hamster.handlers.splice(h,1);break}}},Hamster.normalise={browser:function normaliseBrowser(){"onwheel"in document||document.documentMode>=9||(Hamster.SUPPORT=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"),window.addEventListener||(Hamster.ADD_EVENT="attachEvent",Hamster.REMOVE_EVENT="detachEvent",Hamster.PREFIX="on")},event:function normaliseEvent(originalEvent){var event={originalEvent:originalEvent,target:originalEvent.target||originalEvent.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"===originalEvent.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){originalEvent.preventDefault?originalEvent.preventDefault():originalEvent.returnValue=!1},stopPropagation:function(){originalEvent.stopPropagation?originalEvent.stopPropagation():originalEvent.cancelBubble=!1}};return originalEvent.wheelDelta&&(event.deltaY=-.025*originalEvent.wheelDelta),originalEvent.wheelDeltaX&&(event.deltaX=-.025*originalEvent.wheelDeltaX),originalEvent.detail&&(event.deltaY=originalEvent.detail),event},delta:function normaliseDelta(originalEvent){var delta=0,deltaX=0,deltaY=0,absDelta=0,absDeltaXY=0,fn;return originalEvent.deltaY&&(delta=deltaY=-1*originalEvent.deltaY),originalEvent.deltaX&&(delta=-1*(deltaX=originalEvent.deltaX)),originalEvent.wheelDelta&&(delta=originalEvent.wheelDelta),originalEvent.wheelDeltaY&&(deltaY=originalEvent.wheelDeltaY),originalEvent.wheelDeltaX&&(deltaX=-1*originalEvent.wheelDeltaX),originalEvent.detail&&(delta=-1*originalEvent.detail),0===delta?[0,0,0]:(absDelta=Math.abs(delta),(!lowestDelta||absDelta<lowestDelta)&&(lowestDelta=absDelta),absDeltaXY=Math.max(Math.abs(deltaY),Math.abs(deltaX)),(!lowestDeltaXY||absDeltaXY<lowestDeltaXY)&&(lowestDeltaXY=absDeltaXY),fn=delta>0?"floor":"ceil",[delta=Math[fn](delta/lowestDelta),deltaX=Math[fn](deltaX/lowestDeltaXY),deltaY=Math[fn](deltaY/lowestDeltaXY)])}},"function"==typeof window.define&&window.define.amd?window.define("hamster",[],(function(){return Hamster})):module.exports=Hamster}(window,window.document)},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_FACTORY__,__WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */!function defineMustache(global,factory){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?factory(exports):(__WEBPACK_AMD_DEFINE_ARRAY__=[exports],void 0===(__WEBPACK_AMD_DEFINE_RESULT__="function"==typeof(__WEBPACK_AMD_DEFINE_FACTORY__=factory)?__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__):__WEBPACK_AMD_DEFINE_FACTORY__)||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}(this,(function mustacheFactory(mustache){var objectToString=Object.prototype.toString,isArray=Array.isArray||function isArrayPolyfill(object){return"[object Array]"===objectToString.call(object)};function isFunction(object){return"function"==typeof object}function typeStr(obj){return isArray(obj)?"array":typeof obj}function escapeRegExp(string){return string.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(obj,propName){return null!=obj&&"object"==typeof obj&&propName in obj}function primitiveHasOwnProperty(primitive,propName){return null!=primitive&&"object"!=typeof primitive&&primitive.hasOwnProperty&&primitive.hasOwnProperty(propName)}var regExpTest=RegExp.prototype.test;function testRegExp(re,string){return regExpTest.call(re,string)}var nonSpaceRe=/\S/;function isWhitespace(string){return!testRegExp(nonSpaceRe,string)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(string){return String(string).replace(/[&<>"'`=\/]/g,(function fromEntityMap(s){return entityMap[s]}))}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate(template,tags){if(!template)return[];var sections=[],tokens=[],spaces=[],hasTag=!1,nonSpace=!1,openingTagRe,closingTagRe,closingCurlyRe;function stripSpace(){if(hasTag&&!nonSpace)for(;spaces.length;)delete tokens[spaces.pop()];else spaces=[];hasTag=!1,nonSpace=!1}function compileTags(tagsToCompile){if("string"==typeof tagsToCompile&&(tagsToCompile=tagsToCompile.split(spaceRe,2)),!isArray(tagsToCompile)||2!==tagsToCompile.length)throw new Error("Invalid tags: "+tagsToCompile);openingTagRe=new RegExp(escapeRegExp(tagsToCompile[0])+"\\s*"),closingTagRe=new RegExp("\\s*"+escapeRegExp(tagsToCompile[1])),closingCurlyRe=new RegExp("\\s*"+escapeRegExp("}"+tagsToCompile[1]))}compileTags(tags||mustache.tags);for(var scanner=new Scanner(template),start,type,value,chr,token,openSection;!scanner.eos();){if(start=scanner.pos,value=scanner.scanUntil(openingTagRe))for(var i=0,valueLength=value.length;i<valueLength;++i)isWhitespace(chr=value.charAt(i))?spaces.push(tokens.length):nonSpace=!0,tokens.push(["text",chr,start,start+1]),start+=1,"\n"===chr&&stripSpace();if(!scanner.scan(openingTagRe))break;if(hasTag=!0,type=scanner.scan(tagRe)||"name",scanner.scan(whiteRe),"="===type?(value=scanner.scanUntil(equalsRe),scanner.scan(equalsRe),scanner.scanUntil(closingTagRe)):"{"===type?(value=scanner.scanUntil(closingCurlyRe),scanner.scan(curlyRe),scanner.scanUntil(closingTagRe),type="&"):value=scanner.scanUntil(closingTagRe),!scanner.scan(closingTagRe))throw new Error("Unclosed tag at "+scanner.pos);if(token=[type,value,start,scanner.pos],tokens.push(token),"#"===type||"^"===type)sections.push(token);else if("/"===type){if(!(openSection=sections.pop()))throw new Error('Unopened section "'+value+'" at '+start);if(openSection[1]!==value)throw new Error('Unclosed section "'+openSection[1]+'" at '+start)}else"name"===type||"{"===type||"&"===type?nonSpace=!0:"="===type&&compileTags(value)}if(openSection=sections.pop())throw new Error('Unclosed section "'+openSection[1]+'" at '+scanner.pos);return nestTokens(squashTokens(tokens))}function squashTokens(tokens){for(var squashedTokens=[],token,lastToken,i=0,numTokens=tokens.length;i<numTokens;++i)(token=tokens[i])&&("text"===token[0]&&lastToken&&"text"===lastToken[0]?(lastToken[1]+=token[1],lastToken[3]=token[3]):(squashedTokens.push(token),lastToken=token));return squashedTokens}function nestTokens(tokens){for(var nestedTokens=[],collector=nestedTokens,sections=[],token,section,i=0,numTokens=tokens.length;i<numTokens;++i)switch((token=tokens[i])[0]){case"#":case"^":collector.push(token),sections.push(token),collector=token[4]=[];break;case"/":(section=sections.pop())[5]=token[2],collector=sections.length>0?sections[sections.length-1][4]:nestedTokens;break;default:collector.push(token)}return nestedTokens}function Scanner(string){this.string=string,this.tail=string,this.pos=0}function Context(view,parentContext){this.view=view,this.cache={".":this.view},this.parent=parentContext}function Writer(){this.cache={}}Scanner.prototype.eos=function eos(){return""===this.tail},Scanner.prototype.scan=function scan(re){var match=this.tail.match(re);if(!match||0!==match.index)return"";var string=match[0];return this.tail=this.tail.substring(string.length),this.pos+=string.length,string},Scanner.prototype.scanUntil=function scanUntil(re){var index=this.tail.search(re),match;switch(index){case-1:match=this.tail,this.tail="";break;case 0:match="";break;default:match=this.tail.substring(0,index),this.tail=this.tail.substring(index)}return this.pos+=match.length,match},Context.prototype.push=function push(view){return new Context(view,this)},Context.prototype.lookup=function lookup(name){var cache=this.cache,value;if(cache.hasOwnProperty(name))value=cache[name];else{for(var context=this,intermediateValue,names,index,lookupHit=!1;context;){if(name.indexOf(".")>0)for(intermediateValue=context.view,names=name.split("."),index=0;null!=intermediateValue&&index<names.length;)index===names.length-1&&(lookupHit=hasProperty(intermediateValue,names[index])||primitiveHasOwnProperty(intermediateValue,names[index])),intermediateValue=intermediateValue[names[index++]];else intermediateValue=context.view[name],lookupHit=hasProperty(context.view,name);if(lookupHit){value=intermediateValue;break}context=context.parent}cache[name]=value}return isFunction(value)&&(value=value.call(this.view)),value},Writer.prototype.clearCache=function clearCache(){this.cache={}},Writer.prototype.parse=function parse(template,tags){var cache=this.cache,cacheKey=template+":"+(tags||mustache.tags).join(":"),tokens=cache[cacheKey];return null==tokens&&(tokens=cache[cacheKey]=parseTemplate(template,tags)),tokens},Writer.prototype.render=function render(template,view,partials,tags){var tokens=this.parse(template,tags),context=view instanceof Context?view:new Context(view);return this.renderTokens(tokens,context,partials,template,tags)},Writer.prototype.renderTokens=function renderTokens(tokens,context,partials,originalTemplate,tags){for(var buffer="",token,symbol,value,i=0,numTokens=tokens.length;i<numTokens;++i)value=void 0,"#"===(symbol=(token=tokens[i])[0])?value=this.renderSection(token,context,partials,originalTemplate):"^"===symbol?value=this.renderInverted(token,context,partials,originalTemplate):">"===symbol?value=this.renderPartial(token,context,partials,tags):"&"===symbol?value=this.unescapedValue(token,context):"name"===symbol?value=this.escapedValue(token,context):"text"===symbol&&(value=this.rawValue(token)),void 0!==value&&(buffer+=value);return buffer},Writer.prototype.renderSection=function renderSection(token,context,partials,originalTemplate){var self=this,buffer="",value=context.lookup(token[1]);function subRender(template){return self.render(template,context,partials)}if(value){if(isArray(value))for(var j=0,valueLength=value.length;j<valueLength;++j)buffer+=this.renderTokens(token[4],context.push(value[j]),partials,originalTemplate);else if("object"==typeof value||"string"==typeof value||"number"==typeof value)buffer+=this.renderTokens(token[4],context.push(value),partials,originalTemplate);else if(isFunction(value)){if("string"!=typeof originalTemplate)throw new Error("Cannot use higher-order sections without the original template");null!=(value=value.call(context.view,originalTemplate.slice(token[3],token[5]),subRender))&&(buffer+=value)}else buffer+=this.renderTokens(token[4],context,partials,originalTemplate);return buffer}},Writer.prototype.renderInverted=function renderInverted(token,context,partials,originalTemplate){var value=context.lookup(token[1]);if(!value||isArray(value)&&0===value.length)return this.renderTokens(token[4],context,partials,originalTemplate)},Writer.prototype.renderPartial=function renderPartial(token,context,partials,tags){if(partials){var value=isFunction(partials)?partials(token[1]):partials[token[1]];return null!=value?this.renderTokens(this.parse(value,tags),context,partials,value):void 0}},Writer.prototype.unescapedValue=function unescapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return value},Writer.prototype.escapedValue=function escapedValue(token,context){var value=context.lookup(token[1]);if(null!=value)return mustache.escape(value)},Writer.prototype.rawValue=function rawValue(token){return token[1]},mustache.name="mustache.js",mustache.version="3.0.1",mustache.tags=["{{","}}"];var defaultWriter=new Writer;return mustache.clearCache=function clearCache(){return defaultWriter.clearCache()},mustache.parse=function parse(template,tags){return defaultWriter.parse(template,tags)},mustache.render=function render(template,view,partials,tags){if("string"!=typeof template)throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(template)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(template,view,partials,tags)},mustache.to_html=function to_html(template,view,partials,send){var result=mustache.render(template,view,partials);if(!isFunction(send))return result;send(result)},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer,mustache}))}])}));